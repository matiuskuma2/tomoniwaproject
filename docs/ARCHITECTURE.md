# ToMoniWao - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

**æœ€çµ‚æ›´æ–°**: 2025-12-28  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: MVP Phase 0B

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### è¨­è¨ˆåŸå‰‡

1. **Edge-First**: Cloudflare Edgeã§é«˜é€Ÿãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«é…ä¿¡
2. **Serverless**: ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ä¸è¦ã€è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
3. **Frontend-Backendåˆ†é›¢**: æ˜ç¢ºãªè²¬ä»»åˆ†é›¢
4. **Native-Ready**: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªç§»è¡Œã‚’å‰æã¨ã—ãŸCore Layerè¨­è¨ˆ
5. **Cost-Effective**: ç„¡æ–™æ ã§æœˆé–“æ•°åƒãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ

---

## ğŸ¨ å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     app.tomoniwao.jp                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                  â”‚
         â–¼                  â–¼                  â–¼
   /*ï¼ˆPagesï¼‰        /api/*ï¼ˆWorkersï¼‰   /auth/*ï¼ˆWorkersï¼‰
         â”‚                  â”‚                  â”‚
         â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cloudflare Pages  â”‚ â”‚   Cloudflare  â”‚ â”‚   Cloudflare  â”‚
â”‚   (React SPA)     â”‚ â”‚    Workers    â”‚ â”‚    Workers    â”‚
â”‚                   â”‚ â”‚   (Hono API)  â”‚ â”‚   (OAuth)     â”‚
â”‚ - UI/UX           â”‚ â”‚ - REST API    â”‚ â”‚ - Google Auth â”‚
â”‚ - Routing         â”‚ â”‚ - Business    â”‚ â”‚ - Session     â”‚
â”‚ - State           â”‚ â”‚   Logic       â”‚ â”‚   Management  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚                â”‚
         â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   D1   â”‚      â”‚   KV   â”‚      â”‚   R2   â”‚
    â”‚(SQLite)â”‚      â”‚(Cache) â”‚      â”‚(Files) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Queue  â”‚      â”‚Analytics â”‚
    â”‚(Email) â”‚      â”‚ Engine   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. Frontendï¼ˆCloudflare Pagesï¼‰

#### å½¹å‰²
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆ/dashboard, /threads, /contacts, /listsï¼‰
- APIå‘¼ã³å‡ºã—ï¼ˆBearer tokenèªè¨¼ï¼‰

#### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Framework**: React 19
- **Build Tool**: Vite 7
- **Language**: TypeScript
- **Styling**: Tailwind CSS v3.4.17
- **Router**: React Router v7
- **State**: Zustandï¼ˆæœ€å°é™ï¼‰
- **HTTP**: fetchï¼ˆAxiosä¸ä½¿ç”¨ï¼‰

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                   # ãƒã‚¤ãƒ†ã‚£ãƒ–ç§»è¡Œå¯¾å¿œå±¤
â”‚   â”‚   â”œâ”€â”€ api/               # API clientï¼ˆfetch wrapperï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts      # Bearer tokenè‡ªå‹•æ³¨å…¥
â”‚   â”‚   â”‚   â”œâ”€â”€ threads.ts     # Threads API
â”‚   â”‚   â”‚   â”œâ”€â”€ contacts.ts    # Contacts API
â”‚   â”‚   â”‚   â””â”€â”€ lists.ts       # Lists API
â”‚   â”‚   â”œâ”€â”€ auth/              # Tokenç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ index.ts       # sessionStorageç®¡ç†
â”‚   â”‚   â””â”€â”€ models/            # å‹å®šç¾©
â”‚   â”‚       â””â”€â”€ index.ts       # Thread, Contact, Listç­‰
â”‚   â”œâ”€â”€ pages/                  # UI Pages
â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx      # OAuthé–‹å§‹
â”‚   â”‚   â”œâ”€â”€ DashboardPage.tsx  # Threadsä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ ThreadDetailPage.tsx # Threadè©³ç´°
â”‚   â”‚   â”œâ”€â”€ ContactsPage.tsx   # é€£çµ¡å…ˆç®¡ç†
â”‚   â”‚   â””â”€â”€ ListsPage.tsx      # ãƒªã‚¹ãƒˆç®¡ç†
â”‚   â”œâ”€â”€ components/             # å†åˆ©ç”¨å¯èƒ½UIéƒ¨å“
â”‚   â”œâ”€â”€ App.tsx                 # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
â”‚   â””â”€â”€ main.tsx                # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ public/                     # é™çš„ã‚¢ã‚»ãƒƒãƒˆ
â”œâ”€â”€ dist/                       # ãƒ“ãƒ«ãƒ‰æˆæœç‰©
â””â”€â”€ package.json
```

#### Core Layerè¨­è¨ˆï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ç§»è¡Œå¯¾å¿œï¼‰

**è¨­è¨ˆæ€æƒ³**:
- **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯ä¸€åˆ‡å«ã¾ãªã„**ï¼ˆå…¨ã¦APIå´ï¼‰
- **UIã¨ãƒ­ã‚¸ãƒƒã‚¯ã®å®Œå…¨åˆ†é›¢**
- **fetch wrapperã§èªè¨¼ã‚’æŠ½è±¡åŒ–**

**ãƒã‚¤ãƒ†ã‚£ãƒ–åŒ–æ™‚ã®ç§»è¡Œ**:
1. `pages/` â†’ React Native/Flutter UI ã«ç½®ãæ›ãˆ
2. `core/` â†’ ãã®ã¾ã¾å†åˆ©ç”¨ï¼ˆAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã¿å¤‰æ›´ï¼‰
3. Backend API â†’ å¤‰æ›´ãªã—

---

### 2. Backendï¼ˆCloudflare Workersï¼‰

#### å½¹å‰²
- REST APIæä¾›
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè¡Œ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
- å¤–éƒ¨APIé€£æºï¼ˆGoogle Calendar/Meetï¼‰
- Queueå‡¦ç†ï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼‰
- Cron Jobsï¼ˆå®šæœŸå‡¦ç†ï¼‰

#### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Framework**: Hono v4
- **Language**: TypeScript
- **Runtime**: Cloudflare Workersï¼ˆV8 Isolatesï¼‰
- **Middleware**: cors, logger, auth

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
apps/api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts               # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ routes/                # API Routes
â”‚   â”‚   â”œâ”€â”€ auth.ts           # OAuth, Session
â”‚   â”‚   â”œâ”€â”€ threads.ts        # Threads CRUD
â”‚   â”‚   â”œâ”€â”€ threadsStatus.ts  # Threadé€²æ—
â”‚   â”‚   â”œâ”€â”€ threadsRemind.ts  # ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡
â”‚   â”‚   â”œâ”€â”€ threadsFinalize.ts # ç¢ºå®šï¼‹Meetç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ invite.ts         # å¤–éƒ¨æ‹›å¾…ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ contacts.ts       # é€£çµ¡å…ˆç®¡ç†
â”‚   â”‚   â”œâ”€â”€ lists.ts          # ãƒªã‚¹ãƒˆç®¡ç†
â”‚   â”‚   â”œâ”€â”€ businessCards.ts  # ååˆºç®¡ç†
â”‚   â”‚   â”œâ”€â”€ inbox.ts          # å—ä¿¡ãƒˆãƒ¬ã‚¤
â”‚   â”‚   â””â”€â”€ rooms.ts          # ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ 
â”‚   â”œâ”€â”€ repositories/          # DBæ“ä½œæŠ½è±¡åŒ–
â”‚   â”‚   â”œâ”€â”€ threadsRepository.ts
â”‚   â”‚   â”œâ”€â”€ contactsRepository.ts
â”‚   â”‚   â””â”€â”€ listsRepository.ts
â”‚   â”œâ”€â”€ services/              # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ meetService.ts    # Google Meetç”Ÿæˆ
â”‚   â”œâ”€â”€ middleware/            # Middleware
â”‚   â”‚   â””â”€â”€ auth.ts           # requireAuth, requireAdmin
â”‚   â”œâ”€â”€ queue/                 # Queue Consumers
â”‚   â”‚   â””â”€â”€ emailConsumer.ts  # ãƒ¡ãƒ¼ãƒ«é€ä¿¡å‡¦ç†
â”‚   â””â”€â”€ utils/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ package.json
```

#### APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

**Repository Pattern**:
- DBæ“ä½œã‚’Repositoryå±¤ã«æŠ½è±¡åŒ–
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨DBæ“ä½œã‚’åˆ†é›¢
- ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§å‘ä¸Š

**Middleware**:
- `requireAuth`: Bearer tokenæ¤œè¨¼
- `requireAdmin`: ç®¡ç†è€…æ¨©é™ç¢ºèª
- `cors`: CORSè¨­å®š
- `logger`: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ­ã‚°

---

### 3. Databaseï¼ˆCloudflare D1ï¼‰

#### å½¹å‰²
- ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
- SQLiteãƒ™ãƒ¼ã‚¹ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«åˆ†æ•£ï¼‰

#### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«
- `users` - ãƒ¦ãƒ¼ã‚¶ãƒ¼
- `google_accounts` - Googleé€£æº
- `sessions` - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- `threads` - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ã‚¹ãƒ¬ãƒƒãƒ‰
- `thread_invites` - æ‹›å¾…ãƒˆãƒ¼ã‚¯ãƒ³
- `thread_participants` - å‚åŠ è€…
- `contacts` - é€£çµ¡å…ˆ
- `lists` - ãƒªã‚¹ãƒˆï¼ˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼‰
- `list_members` - ãƒªã‚¹ãƒˆãƒ¡ãƒ³ãƒãƒ¼
- `business_cards` - ååˆºæƒ…å ±
- `inbox_items` - å—ä¿¡ãƒˆãƒ¬ã‚¤

è©³ç´°: [DATABASE_SCHEMA.md](./DATABASE_SCHEMA.md)

---

### 4. KV Storageï¼ˆCloudflare KVï¼‰

#### ç”¨é€”
- **OTP_STORE**: ãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- **RATE_LIMIT**: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼

#### ç‰¹æ€§
- ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆEdgeé…ä¿¡ï¼‰
- TTLå¯¾å¿œï¼ˆè‡ªå‹•å‰Šé™¤ï¼‰
- Eventual Consistency

---

### 5. R2 Storageï¼ˆCloudflare R2ï¼‰

#### ç”¨é€”
- **éŸ³å£°éŒ²éŸ³**: å°†æ¥ã®éŸ³å£°å…¥åŠ›æ©Ÿèƒ½ç”¨
- **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: CSV/JSONå‡ºåŠ›
- **æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«**: å°†æ¥ã®æ©Ÿèƒ½æ‹¡å¼µç”¨

#### ç‰¹æ€§
- S3äº’æ›API
- Egressç„¡æ–™ï¼ˆCloudflareå†…ï¼‰

---

### 6. Queueï¼ˆCloudflare Queuesï¼‰

#### ç”¨é€”
- **email-queue**: ãƒ¡ãƒ¼ãƒ«é€ä¿¡éåŒæœŸå‡¦ç†
- **email-dlq**: Dead Letter Queueï¼ˆå¤±æ•—ãƒ¡ãƒ¼ãƒ«ï¼‰

#### ãƒ•ãƒ­ãƒ¼
```
API Request â†’ Queue.send(message)
                    â†“
            Queue Consumer (Worker)
                    â†“
            SendGrid API â†’ Emailé€ä¿¡
```

---

### 7. Cron Jobs

#### ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- `0 2 * * *` - æ¯æ—¥2:00ï¼ˆæ—¥æ¬¡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰
- `0 * * * *` - æ¯æ™‚ï¼ˆãƒã‚¸ã‚§ãƒƒãƒˆãƒã‚§ãƒƒã‚¯ï¼‰

#### å‡¦ç†å†…å®¹
- æœŸé™åˆ‡ã‚Œã‚»ãƒƒã‚·ãƒ§ãƒ³å‰Šé™¤
- æœŸé™åˆ‡ã‚Œæ‹›å¾…å‰Šé™¤
- AIåˆ©ç”¨ã‚³ã‚¹ãƒˆé›†è¨ˆ

---

## ğŸ” èªè¨¼ãƒ•ãƒ­ãƒ¼è©³ç´°

### Cookie + Bearer Tokenãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼

#### ãƒ•ãƒ­ãƒ¼å›³
```
1. User â†’ /auth/google/start
           â†“
2. Google OAuth â†’ è¨±å¯
           â†“
3. /auth/google/callback
   - Googleã‹ã‚‰codeå–å¾—
   - access_token + refresh_tokenå–å¾—
   - usersãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
   - google_accountsãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
   - sessionsãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
   - Cookie: session=<token> ã‚’ã‚»ãƒƒãƒˆ
   - / ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
           â†“
4. Frontend: POST /auth/token
   - Cookie: session=<token> ã‚’é€ä¿¡
   - Workers: sessionæ¤œè¨¼
   - access_tokenï¼ˆ=session tokenï¼‰ã‚’è¿”å´
           â†“
5. Frontend: sessionStorage.setItem('token', access_token)
           â†“
6. ä»¥é™å…¨API: Authorization: Bearer <token>
```

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç‰¹æ€§
- **Cookie**: HttpOnly, Secure, SameSite=Lax
- **Session Token**: SHA-256ãƒãƒƒã‚·ãƒ¥åŒ–
- **æœ‰åŠ¹æœŸé™**: 30æ—¥é–“
- **Bearer Token**: sessionStorageï¼ˆXSSå¯¾ç­–ï¼‰

---

## ğŸŒ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­è¨ˆ

### Cloudflareè¨­å®š

```
app.tomoniwao.jp/
â”œâ”€â”€ /api/*          â†’ Workersï¼ˆwebappï¼‰- REST API
â”œâ”€â”€ /auth/*         â†’ Workersï¼ˆwebappï¼‰- OAuth
â”œâ”€â”€ /i/*            â†’ Workersï¼ˆwebappï¼‰- å¤–éƒ¨æ‹›å¾…ãƒšãƒ¼ã‚¸
â””â”€â”€ /*              â†’ Pagesï¼ˆwebappï¼‰- React SPA
```

### Workers Routeså„ªå…ˆåº¦
1. `/api/*` - æœ€å„ªå…ˆ
2. `/auth/*` - æ¬¡
3. `/i/*` - æ¬¡
4. ãã®ä»– - Pagesï¼ˆè‡ªå‹•ï¼‰

### CORSè¨­å®š
- **Pages â†’ Workers**: åŒä¸€ã‚ªãƒªã‚¸ãƒ³ï¼ˆCORSä¸è¦ï¼‰
- **å¤–éƒ¨ â†’ /i/:token**: CORSç„¡åŠ¹åŒ–ï¼ˆPublicï¼‰

---

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### Frontend
- **Code Splitting**: React Routerè‡ªå‹•
- **Tree Shaking**: Viteè‡ªå‹•
- **CDNé…ä¿¡**: Cloudflare Pages
- **Lazy Loading**: ç”»åƒãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### Backend
- **Edge Execution**: Workersï¼ˆGlobalåˆ†æ•£ï¼‰
- **Connection Pooling**: D1è‡ªå‹•
- **KV Cache**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»OTP
- **Queue**: éåŒæœŸå‡¦ç†

### ç›®æ¨™ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·
- **Pagesèª­ã¿è¾¼ã¿**: < 1ç§’
- **APIå¿œç­”**: < 200msï¼ˆP95ï¼‰
- **OAuth**: < 3ç§’ï¼ˆGoogleä¾å­˜ï¼‰

---

## ğŸ”„ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### å‚ç›´ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- **ä¸è¦**ï¼ˆServerlessè‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰

### æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- **Workers**: è‡ªå‹•ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã«å¿œã˜ã¦ï¼‰
- **D1**: è‡ªå‹•ï¼ˆRead Replicaï¼‰
- **KV**: è‡ªå‹•ï¼ˆEdgeåˆ†æ•£ï¼‰

### ãƒœãƒˆãƒ«ãƒãƒƒã‚¯å¯¾ç­–
- **D1 Write**: å˜ä¸€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆç¾çŠ¶å•é¡Œãªã—ï¼‰
- **Queue**: ãƒãƒƒãƒå‡¦ç†ã§ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆå‘ä¸Š

---

## ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### Frontend
- **API Error**: çµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **Network Error**: ãƒªãƒˆãƒ©ã‚¤ï¼‹ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥
- **Auth Error**: è‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

### Backend
- **DB Error**: ãƒ­ã‚°è¨˜éŒ²ï¼‹500è¿”å´
- **External API Error**: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‹ãƒªãƒˆãƒ©ã‚¤
- **Queue Error**: DLQé€ä¿¡

---

## ğŸ“ ãƒ­ã‚°ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### ç¾çŠ¶
- **Workers**: `console.log` â†’ Cloudflare Logs
- **Analytics Engine**: ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆè¨˜éŒ²

### å°†æ¥
- **Sentry**: ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- **Grafana**: ãƒ¡ãƒˆãƒªã‚¯ã‚¹å¯è¦–åŒ–
- **Cloudflare Logpush**: å¤–éƒ¨ãƒ­ã‚°ä¿å­˜

---

## ğŸ”® å°†æ¥ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ‹¡å¼µ

### Phase 1ï¼ˆPWAå®Œå…¨ç‰ˆï¼‰
- **Service Worker**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- **Push Notification**: Webãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- **Web Speech API**: éŸ³å£°å…¥åŠ›

### Phase 2ï¼ˆAIå¼·åŒ–ï¼‰
- **Gemini API**: éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ç†è§£
- **Vertex AI**: ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ï¼ˆå°†æ¥ï¼‰
- **Vector DB**: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢

### Phase 3ï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ï¼‰
- **Capacitor**: WebView + Native API
- **React Native**: ãƒ•ãƒ«ãƒã‚¤ãƒ†ã‚£ãƒ–ï¼ˆæ¤œè¨ï¼‰
- **Background Sync**: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†

---

**æ¬¡ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [DATABASE_SCHEMA.md](./DATABASE_SCHEMA.md)
