# 既知の問題

最終更新: **2026-01-03**

---

## 🔴 現在の問題

### なし
- 現時点で既知の問題はありません

---

## ⚠️ 将来対応予定

### Phase2 マルチテナント対応
- [ ] workspaces テーブルの本格運用
- [ ] workspace 作成/切替 API
- [ ] workspace_members テーブル追加
- [ ] workspace 権限管理

### Billing Gate 詳細制御
- [ ] プラン別制御（Free/Pro/Enterprise）
- [ ] 使用量制限（月間スレッド数、招待数）
- [ ] 超過時の段階的制御

### UI/UX 改善
- [ ] 402 エラー時の reason 別メッセージ表示
- [ ] レスポンシブ対応強化
- [ ] アクセシビリティ改善

### 監視・ログ
- [ ] 402 reason 別集計
- [ ] Cloudflare Analytics 活用
- [ ] アラート設定

### admin 系 UI
- [ ] admin ダッシュボード UI 実装
- [ ] ユーザー管理 UI
- [ ] システム設定 UI

---

## ✅ 解決済み

### 2026-01-03
- ✅ POST /api/threads で workspace_id が INSERT されない → 修正完了
- ✅ Billing Gate の運用インシデント切り分けが困難 → reason フィールド追加
- ✅ email 正規化ロジックの重複 → normalizeEmail() 共通化

### 2026-01-02
- ✅ threads 系 API で tenant 条件が抜けている → 全 API に適用完了
- ✅ OFFSET pagination が残っている → cursor 化完了（例外ゼロ）
- ✅ Migration が後から編集される → CI で検知

### 2026-01-01
- ✅ 課金状態による実行制御がない → Billing Gate 実装完了

---

## 📝 問題報告テンプレート

新しい問題を発見した場合は、以下の形式で記録してください:

```markdown
### [問題タイトル]
- **発見日**: YYYY-MM-DD
- **影響範囲**: [High/Medium/Low]
- **現象**: [何が起きているか]
- **再現手順**:
  1. [ステップ1]
  2. [ステップ2]
- **期待動作**: [どうあるべきか]
- **回避策**: [一時的な対処法があれば]
- **根本原因**: [分かっている場合]
- **修正予定**: [いつ頃修正するか]
```

---

## 🔍 問題の優先度判定

### High（即座に対応）
- 本番環境でユーザーが使えない
- データ損失の可能性
- セキュリティ問題

### Medium（次のスプリントで対応）
- 一部機能が使えない
- 回避策がある
- パフォーマンス問題

### Low（計画的に対応）
- UI/UX の改善
- 非クリティカルな機能追加
- 技術負債の解消
