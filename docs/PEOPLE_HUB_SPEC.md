# People Hub è¨­è¨ˆæ›¸ï¼ˆç¢ºå®šç‰ˆï¼‰

æœ€çµ‚æ›´æ–°æ—¥: 2026-02-06
ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: **ç¢ºå®š**ï¼ˆP0å®Ÿè£…é–‹å§‹ï¼‰

---

## 1. è¨­è¨ˆæ€æƒ³

### 1.1 æ ¸ã¨ãªã‚‹åŸå‰‡

> **ã€Œäººã¯1äººã—ã‹ã„ãªã„ã€**

åŒã˜äººãŒè¤‡æ•°ç”»é¢ã«åˆ†æ•£ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ç¾çŠ¶ã‚’è§£æ¶ˆã—ã€
**1äºº = 1è¡Œ**ã®çµ±åˆè¡¨ç¤ºã‚’å®Ÿç¾ã™ã‚‹ã€‚

### 1.2 äº‹æ•…æœ€å°ã®è¨­è¨ˆ

| å½¹å‰² | UIã§ã‚„ã‚‹ã“ã¨ | UIã§ã‚„ã‚‰ãªã„ã“ã¨ |
|------|-------------|-----------------|
| **é–²è¦§** | âœ… äººã®ä¸€è¦§è¡¨ç¤º | - |
| **æ¤œç´¢** | âœ… åå‰/ãƒ¡ãƒ¼ãƒ«ã§çµã‚Šè¾¼ã¿ | - |
| **ãƒ•ã‚£ãƒ«ã‚¿** | âœ… é–¢ä¿‚æ€§/ãƒªã‚¹ãƒˆæ‰€å±ã§çµã‚Šè¾¼ã¿ | - |
| **ç›£æŸ»** | âœ… ä¸æ­£ãƒ‡ãƒ¼ã‚¿ã®è­¦å‘Šè¡¨ç¤º | - |
| **ç™»éŒ²** | ğŸš« â†’ ãƒãƒ£ãƒƒãƒˆã§ | åå‰ã ã‘ç™»éŒ²ï¼ˆäº‹æ•…æºï¼‰ |
| **å–ã‚Šè¾¼ã¿** | ğŸš« â†’ ãƒãƒ£ãƒƒãƒˆã§ | CSV/PDF/ååˆºã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ |
| **ä¸€æ‹¬æ“ä½œ** | ğŸš« â†’ ãƒãƒ£ãƒƒãƒˆã§ | ãƒªã‚¹ãƒˆä¸€æ‹¬è¿½åŠ  |

**ç†ç”±**: UIã§"å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ åœ°ç„ï¼‹ä¸æ•´åˆ"ãŒèµ·ãã‚„ã™ã„é ˜åŸŸã‚’ã€
ãƒãƒ£ãƒƒãƒˆã® **ç¢ºèªâ†’å®Ÿè¡Œ** ã«çµ±ä¸€ã™ã‚‹ã“ã¨ã§äº‹æ•…ã‚’é˜²ãã€‚

---

## 2. æƒ…å ±ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 ç”»é¢æ§‹æˆ

```
/people              ... People Hubï¼ˆãƒ¡ã‚¤ãƒ³ç”»é¢ï¼‰
/people/:personKey   ... Person Detailï¼ˆP1ä»¥é™ï¼‰
```

### 2.2 æ—§ç”»é¢ã¨ã®é–¢ä¿‚

| æ—§URL | å¯¾å¿œ |
|-------|------|
| `/contacts` | `/people` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ |
| `/lists` | `/people` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆãƒªã‚¹ãƒˆã¯ä¸‹éƒ¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ |
| `/relationships/request` | `/people` ã‹ã‚‰ã€Œãƒãƒ£ãƒƒãƒˆã§ç”³è«‹ã€ã¸èª˜å° |

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆSSOTï¼‰

### 3.1 PeopleRowï¼ˆè¡¨ç¤ºãƒ¢ãƒ‡ãƒ«ï¼‰

```typescript
interface PeopleRow {
  // === ä¸€æ„ã‚­ãƒ¼ ===
  // å„ªå…ˆé †: app_user_id > email_normalized > contact_id
  person_key: string;
  
  // === åŸºæœ¬æƒ…å ± ===
  display_name: string;
  email: string | null;
  
  // === é–¢ä¿‚æ€§ï¼ˆRelationshipsãŒSSOTï¼‰===
  connection_status: 'workmate' | 'family' | 'external' | 'pending' | 'blocked';
  
  // === æ‰€å±ãƒªã‚¹ãƒˆ ===
  lists: { id: string; name: string }[];
  
  // === ç›£æŸ»ãƒ•ãƒ©ã‚° ===
  flags: {
    missing_email: boolean;           // ãƒ¡ãƒ¼ãƒ«æœªç™»éŒ²
    duplicate_email_suspect: boolean; // ãƒ¡ãƒ¼ãƒ«é‡è¤‡ç–‘ã„
    pending_request_outgoing: boolean;// è‡ªåˆ†ãŒç”³è«‹ä¸­
    pending_request_incoming: boolean;// ç›¸æ‰‹ã‹ã‚‰ç”³è«‹ä¸­
    blocked: boolean;                 // ãƒ–ãƒ­ãƒƒã‚¯ä¸­
  };
  
  // === å°†æ¥æ‹¡å¼µï¼ˆP2ä»¥é™ã€ä»Šã¯nullï¼‰===
  // profile?: PersonProfile;
  // history?: PersonHistory;
  // ai_insights?: PersonAIInsights;
}
```

### 3.2 å°†æ¥æ‹¡å¼µï¼ˆè¨­è¨ˆäºˆç´„ã®ã¿ã€ä»Šã¯å®Ÿè£…ã—ãªã„ï¼‰

```typescript
// P2: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µ
interface PersonProfile {
  job_title?: string;        // è·æ¥­ãƒ»å½¹è·
  company?: string;          // ä¼šç¤¾å
  skills?: string[];         // å¾—æ„åˆ†é‡
  bio?: string;              // è‡ªå·±ç´¹ä»‹
}

// P3: è¡Œå‹•å±¥æ­´
interface PersonHistory {
  last_scheduled_at?: string;      // æœ€å¾Œã«äºˆå®šèª¿æ•´ã—ãŸæ—¥
  total_meetings: number;          // ç´¯è¨ˆãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ•°
  interaction_frequency: 'high' | 'medium' | 'low' | 'dormant';
}

// P4: AIæ¨è–¦
interface PersonAIInsights {
  recommendation_score?: number;   // ãŠã™ã™ã‚åº¦ï¼ˆ0-100ï¼‰
  suggested_actions?: string[];    // ã€Œé€£çµ¡ã—ã¦ã¿ã¦ã¯ï¼Ÿã€ç­‰
}
```

### 3.3 DBã¯å¤‰æ›´ã—ãªã„ï¼ˆå®‰å…¨ã®ãŸã‚ï¼‰

æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãã®ã¾ã¾ä½¿ç”¨ã—ã€APIã§çµåˆã—ã¦è¿”ã™ï¼š
- `contacts` - é€£çµ¡å…ˆã®åŸºæœ¬æƒ…å ±
- `relationships` - ã¤ãªãŒã‚ŠçŠ¶æ…‹ï¼ˆSSOTï¼‰
- `lists` / `list_members` - ãƒªã‚¹ãƒˆæ‰€å±

---

## 4. UIä»•æ§˜ï¼ˆP0: Read Onlyï¼‰

### 4.1 ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  People Hub                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ” æ¤œç´¢...                            â”‚  â”‚ [+ ãƒãƒ£ãƒƒãƒˆã§è¿½åŠ ]   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  [ã™ã¹ã¦] [workmate] [family] [å¤–éƒ¨] [ç”³è«‹ä¸­]  ãƒªã‚¹ãƒˆ: [ã™ã¹ã¦ â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸ ç›£æŸ»ã‚¢ãƒ©ãƒ¼ãƒˆ                                                    â”‚
â”‚  â”œâ”€â”€ ãƒ¡ãƒ¼ãƒ«æœªç™»éŒ²: 3ä»¶ï¼ˆãƒªã‚¹ãƒˆæ‹›å¾…ã§ãã¾ã›ã‚“ï¼‰                       â”‚
â”‚  â”œâ”€â”€ ãƒ¡ãƒ¼ãƒ«é‡è¤‡ç–‘ã„: 1ä»¶                                            â”‚
â”‚  â””â”€â”€ ç”³è«‹ä¸­: 2ä»¶ï¼ˆæ‰¿èªå¾…ã¡ï¼‰                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ‘¤ ç”°ä¸­å¤ªéƒ                                                      â”‚â”‚
â”‚  â”‚ tanaka@example.com                                               â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚â”‚
â”‚  â”‚ â”‚ workmate â”‚ â”‚ å–¶æ¥­, é–‹ç™º         â”‚                             â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚â”‚
â”‚  â”‚                                        [æ—¥ç¨‹èª¿æ•´]                â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ ğŸ‘¤ ä½è—¤èŠ±å­                                                      â”‚â”‚
â”‚  â”‚ sato@example.com                                                 â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚â”‚
â”‚  â”‚ â”‚ å¤–éƒ¨     â”‚ â”‚ å–¶æ¥­               â”‚                             â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚â”‚
â”‚  â”‚                                        [ã¤ãªãŒã‚Šç”³è«‹]            â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ ğŸ‘¤ å±±ç”°ä¸€éƒ                                          âš ï¸          â”‚â”‚
â”‚  â”‚ ãƒ¡ãƒ¼ãƒ«æœªç™»éŒ²                                                     â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚â”‚
â”‚  â”‚ â”‚ å¤–éƒ¨     â”‚                                                    â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚â”‚
â”‚  â”‚                                        [ãƒ¡ãƒ¼ãƒ«ç™»éŒ²ãŒå¿…è¦]        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“‹ ãƒªã‚¹ãƒˆç®¡ç†                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ å–¶æ¥­ãƒªã‚¹ãƒˆ (12)    â”‚ â”‚ é–‹ç™ºãƒªã‚¹ãƒˆ (8)     â”‚  [ãƒãƒ£ãƒƒãƒˆã§ä½œæˆ]    â”‚
â”‚  â”‚ âš ï¸ ãƒ¡ãƒ¼ãƒ«æ¬ è½: 2   â”‚ â”‚ âœ“ å…¨å“¡é€é”å¯èƒ½     â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ã¤ãªãŒã‚Šãƒãƒƒã‚¸

| ãƒãƒƒã‚¸ | è‰² | æ„å‘³ | CTA |
|--------|-----|------|-----|
| `workmate` | é’ | ä»•äº‹ä»²é–“ï¼ˆç›¸äº’æ‰¿èªæ¸ˆã¿ï¼‰ | [æ—¥ç¨‹èª¿æ•´] |
| `family` | ç·‘ | å®¶æ—ï¼ˆç›¸äº’æ‰¿èªæ¸ˆã¿ï¼‰ | [æ—¥ç¨‹èª¿æ•´] |
| `å¤–éƒ¨` | ã‚°ãƒ¬ãƒ¼ | ã¾ã ã¤ãªãŒã£ã¦ã„ãªã„ | [ã¤ãªãŒã‚Šç”³è«‹] |
| `ç”³è«‹ä¸­` | é»„ | æ‰¿èªå¾…ã¡ | [ç”³è«‹çŠ¶æ³] |
| `blocked` | èµ¤ | ãƒ–ãƒ­ãƒƒã‚¯ä¸­ | [è§£é™¤]ï¼ˆP1ï¼‰ |

### 4.3 ç›£æŸ»ã‚¢ãƒ©ãƒ¼ãƒˆ

| ã‚¢ãƒ©ãƒ¼ãƒˆ | æ¡ä»¶ | å¯¾å¿œ |
|----------|------|------|
| ãƒ¡ãƒ¼ãƒ«æœªç™»éŒ² | `email = null` | ãƒªã‚¹ãƒˆæ‹›å¾…ä¸å¯ã‚’æ˜ç¤º |
| ãƒ¡ãƒ¼ãƒ«é‡è¤‡ç–‘ã„ | åŒä¸€ãƒ¡ãƒ¼ãƒ«ãŒè¤‡æ•°ä»¶ | èª¤é€ä¿¡ãƒªã‚¹ã‚¯ã‚’è­¦å‘Š |
| ç”³è«‹ä¸­ | `pending_request = true` | æ‰¿èªã‚’ä¿ƒã™ |

### 4.4 ã€Œãƒãƒ£ãƒƒãƒˆã§è¿½åŠ ã€ãƒ¢ãƒ¼ãƒ€ãƒ«

UIã‹ã‚‰ç™»éŒ²ã•ã›ãšã€ãƒãƒ£ãƒƒãƒˆã¸èª˜å°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒãƒ£ãƒƒãƒˆã§è¿½åŠ                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ãƒãƒ£ãƒƒãƒˆã§ä»¥ä¸‹ã®ã‚ˆã†ã«è©±ã—ã‹ã‘ã¦ãã ã•ã„ï¼š                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“§ ãƒ¡ãƒ¼ãƒ«ã§è¿½åŠ                                                  â”‚
â”‚     ã€Œtanaka@example.com ã‚’é€£çµ¡å…ˆã«è¿½åŠ ã—ã¦ã€                    â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“‡ ååˆºã‹ã‚‰è¿½åŠ                                                  â”‚
â”‚     ã€Œã“ã®ååˆºã‚’ç™»éŒ²ã—ã¦ã€ï¼ˆç”»åƒæ·»ä»˜ï¼‰                            â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“‹ CSVã‹ã‚‰ä¸€æ‹¬è¿½åŠ                                               â”‚
â”‚     ã€Œã“ã®CSVã‚’å–ã‚Šè¾¼ã‚“ã§ã€ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ·»ä»˜ï¼‰                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è¿½åŠ                                              â”‚
â”‚     ã€Œç”°ä¸­å¤ªéƒ tanaka@example.com ã‚’è¿½åŠ ã€                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¤ ä»•äº‹ä»²é–“ã¨ã—ã¦è¿½åŠ                                            â”‚
â”‚     ã€Œç”°ä¸­ã•ã‚“ã‚’ä»•äº‹ä»²é–“ã«ç”³è«‹ã—ã¦ã€                              â”‚
â”‚                                                                 â”‚
â”‚                                        [ãƒãƒ£ãƒƒãƒˆã‚’é–‹ã]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. APIä»•æ§˜ï¼ˆP0ï¼‰

### 5.1 GET /api/people

**Request:**
```
GET /api/people?query=&connection_status=&list_id=&limit=20&offset=0
```

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | èª¬æ˜ |
|-----------|-----|------|
| query | string | åå‰/ãƒ¡ãƒ¼ãƒ«ã§æ¤œç´¢ |
| connection_status | string | workmate/family/external/pending/blocked |
| list_id | string | ç‰¹å®šãƒªã‚¹ãƒˆæ‰€å±ã§çµã‚Šè¾¼ã¿ |
| limit | number | å–å¾—ä»¶æ•°ï¼ˆdefault: 20, max: 100ï¼‰ |
| offset | number | ã‚ªãƒ•ã‚»ãƒƒãƒˆ |

**Response:**
```typescript
{
  items: PeopleRow[];
  audit: {
    missing_email_count: number;
    duplicate_email_suspect_count: number;
    pending_request_count: number;
    blocked_count: number;
  };
  lists: {
    id: string;
    name: string;
    member_count: number;
    missing_email_count: number;
  }[];
  pagination: {
    total: number;
    limit: number;
    offset: number;
    has_more: boolean;
  };
}
```

### 5.2 SQLçµåˆãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå‚è€ƒï¼‰

```sql
-- contacts ã‚’èµ·ç‚¹ã« relationships ã¨ list_members ã‚’ LEFT JOIN
SELECT 
  c.id as contact_id,
  COALESCE(r.user_b_id, c.user_id, c.id) as person_key,
  c.display_name,
  c.email,
  CASE 
    WHEN r.status = 'active' AND r.relation_type = 'workmate' THEN 'workmate'
    WHEN r.status = 'active' AND r.relation_type = 'family' THEN 'family'
    WHEN rr.status = 'pending' THEN 'pending'
    WHEN b.id IS NOT NULL THEN 'blocked'
    ELSE 'external'
  END as connection_status,
  c.email IS NULL as missing_email
FROM contacts c
LEFT JOIN relationships r ON (
  (r.user_a_id = :userId AND r.user_b_id = c.user_id) OR
  (r.user_b_id = :userId AND r.user_a_id = c.user_id)
) AND r.status = 'active'
LEFT JOIN relationship_requests rr ON (
  rr.inviter_user_id = :userId AND rr.invitee_user_id = c.user_id
) AND rr.status = 'pending'
LEFT JOIN blocks b ON b.user_id = :userId AND b.blocked_user_id = c.user_id
WHERE c.owner_user_id = :userId
ORDER BY c.display_name ASC
LIMIT :limit OFFSET :offset
```

---

## 6. å®Ÿè£…è¨ˆç”»

### Phase 0ï¼ˆä»Šå›ï¼‰: Read Only

| PR | å†…å®¹ | å„ªå…ˆåº¦ |
|----|------|--------|
| PR-P0-PEOPLE-HUB-2 | Peopleçµ±åˆAPIï¼ˆã‚µãƒ¼ãƒJOINï¼‰ | **æœ€å„ªå…ˆ** |
| PR-P0-PEOPLE-HUB-1 | People Hub UIï¼ˆReadOnlyï¼‰ | é«˜ |
| PR-P0-PEOPLE-HUB-3 | æ—§ç”»é¢çµ±åˆï¼ˆãƒŠãƒ“æ•´ç†ï¼‰ | ä¸­ |
| PR-P0-PEOPLE-HUB-4 | ç›£æŸ»å¼·åŒ–ï¼ˆè­¦å‘Šç²¾åº¦å‘ä¸Šï¼‰ | ä¸­ |

### Phase 1ï¼ˆæ¬¡å›ï¼‰: ãƒãƒ£ãƒƒãƒˆé€£æº

| PR | å†…å®¹ |
|----|------|
| PR-P1-CHAT-IMPORT | CSV/ååˆº/ãƒ†ã‚­ã‚¹ãƒˆå–ã‚Šè¾¼ã¿ï¼ˆdraftâ†’confirmï¼‰ |
| PR-P1-WORKMATE-FLOW | ç”³è«‹â†’æ‰¿è«¾â†’æˆç«‹ã®ç›£æŸ» |
| PR-P1-LIST-SAFETY | ãƒªã‚¹ãƒˆãƒ¡ãƒ³ãƒãƒ¼ã®ãƒ¡ãƒ¼ãƒ«å¿…é ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |

### Phase 2-4ï¼ˆå°†æ¥ï¼‰: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µ

| Phase | å†…å®¹ |
|-------|------|
| P2 | ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè·æ¥­/ä¼šç¤¾/ã‚¹ã‚­ãƒ«ï¼‰ |
| P3 | è¡Œå‹•å±¥æ­´ï¼ˆæœ€çµ‚èª¿æ•´æ—¥/é »åº¦ï¼‰ |
| P4 | AIæ¨è–¦ï¼ˆãŠã™ã™ã‚åº¦/ææ¡ˆï¼‰ |

---

## 7. å—ã‘å…¥ã‚ŒåŸºæº–ï¼ˆDoDï¼‰

### P0å®Œäº†æ¡ä»¶

- [ ] People Hubã§**åŒã˜äººãŒè¤‡æ•°è¡Œã«åˆ†è£‚ã—ãªã„**
- [ ] UIã‹ã‚‰ã€Œåå‰ã ã‘ç™»éŒ²ã€ãŒ**ã§ããªã„**ï¼ˆãƒãƒ£ãƒƒãƒˆã¸èª˜å°ï¼‰
- [ ] workmateæœªæˆç«‹ã®äººãŒ**workmateè¡¨ç¤ºã•ã‚Œãªã„**
- [ ] ãƒ¡ãƒ¼ãƒ«æ¬ è½ãŒ**ä¸€ç›®ã§åˆ†ã‹ã‚‹**ï¼ˆè­¦å‘Šãƒãƒƒã‚¸ï¼‰
- [ ] æ¤œç´¢/ãƒ•ã‚£ãƒ«ã‚¿ãŒ**1000äººã§ã‚‚ç ´ç¶»ã—ãªã„**ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

---

## 8. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `PEOPLE_DOMAIN_GLOSSARY.md` - Contacts/Lists/Relationships ã®ç”¨èªå®šç¾©
- `INTENT_CONVERSATION_DESIGN.md` - ãƒãƒ£ãƒƒãƒˆå–ã‚Šè¾¼ã¿ã®ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆè¨­è¨ˆ
- `NOTIFICATION_SYSTEM_PLAN.md` - é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|------|---------|
| 2026-02-06 | v2: ç¢ºå®šç‰ˆã€‚äººä¸­å¿ƒè¨­è¨ˆã€Read Onlyã‚¢ãƒ—ãƒ­ãƒ¼ãƒã€å°†æ¥æ‹¡å¼µäºˆç´„ |
| 2026-02-05 | v1: åˆç‰ˆä½œæˆï¼ˆã‚¿ãƒ–åˆ†å‰²è¨­è¨ˆã€å»ƒæ­¢ï¼‰ |
